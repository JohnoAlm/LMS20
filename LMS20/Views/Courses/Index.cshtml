@using LMS20.Core.Types
@model CoursesViewModel

<!-- Modal View -->
@{ var course = new CreateCoursePartialViewModel{}; }
<partial name="CreateCoursePartial" model="@course"/>

<div class="row">
<div class="col-2">

    <!-- Nav-bar -->
    <div class="msb" id="msb">
	    <nav class="navbar navbar-default" role="navigation">
            <div class="side-menu-container">

	            <ul class="nav navbar-nav central">
		            <li>
                        <a asp-action="CreateCoursePartial"  class="nav-link text-black" data-bs-toggle="modal" data-bs-target="#exampleModal">
                            <i class="central bi bi-mortarboard-fill"></i>
                            <div class="central-text">Skapa ny kurs</div>
                        </a>             
                                @*data-ajax="true"
                                data-ajax-method="GET"
                                data-ajax-update="#createajax"
                                data-ajax-mode="replace"
                                data-ajax-success="fixValidation"*@                    
                    </li>
                    <li>
                        <a asp-action="Participants" class="nav-link text-black">
                            <i class="central bi bi-person-fill"></i>
                            <div class="central-text">Lägg till ny lärare</div>
                        </a>
                    </li>
	            </ul>

            </div>
        </nav>  
    </div>

</div>

<!-- Courses List -->
<div class="col-10" id="courses-list">

    <br />
    <h1 class="dash-titel">Kurser</h1>
    <hr />
@{
    bool isFound = false;
    foreach(var item in Model.courses) {

        //if(item.Start < DateTime.Now && item.End > DateTime.Now) {
        if(item.CourseStatus == Status.Current) {

            if(!isFound) { 
                        <span class="coursegroup">Pågående</span> 
                isFound = true; 
            }
            
            <partial name="CoursePartial" model="@item"/>
        }
    }
}
    <div id="CommingCourses">
@{  isFound = false;
    foreach(var item in Model.courses) {

        if(item.CourseStatus == Status.Comming) {

            if(!isFound) { 
                    <span class="coursegroup">Kommande</span>
                isFound = true; 
            }

            <partial name="CoursePartial" model="@item"/>
        }
    }
}
    </div>

@{    isFound = false;
    foreach(var item in Model.courses) {

        if(item.CourseStatus == Status.Completed) {

            if(!isFound) { 
                <span class="coursegroup">Avslutade</span> 
                isFound = true; 
            }
            
            <partial name="CoursePartial" model="@item"/>
        }
    }
}
</div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}