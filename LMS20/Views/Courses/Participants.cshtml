@model ParticipantsViewModel


@{
    ViewData["Title"] = "Details";
}


<h1 id = "participantsTitle" class = "my-3">Kursmedlemmar</h1>
<hr />


@if(User.IsInRole("Teacher"))
{
    <button 
        asp-area="Identity" asp-page="/Account/Register"
        type = "button" 
        class = "float-end btn btn-outline-dark" 
        data-bs-toggle = "modal" 
        data-bs-target = "#addstudent"><i class="bi bi-person-plus-fill"></i>
    </button>
}

<table class="table my-5">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.ApplicationUsers.FirstOrDefault()!.FirstName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ApplicationUsers.FirstOrDefault()!.LastName)
                </th>
                 <th>
                    @Html.DisplayNameFor(model => model.ApplicationUsers.FirstOrDefault()!.Email)
                </th>
                <th></th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model.ApplicationUsers) {
            <tr>
              <td>
                  @Html.DisplayFor(modelItem => item.FirstName)
              </td>
              <td>
                  @Html.DisplayFor(modelItem => item.LastName)
              </td>
              <td>
                  @Html.DisplayFor(modelItem => item.Email)
              </td>
              <td>
                  @if (User.IsInRole("Teacher"))
                  { 
                      <button
                      asp-area  = "Identity"
                      type = "button"
                      class="btn btn-outline-dark float-end"
                      data-bs-toggle = "modal"
                      data-bs-target = "#editstudent"><i title = "Redigera elev" class="bi bi-pencil-square"></i></button>
                  }
              </td>
            </tr>
            }
        </tbody>
</table>

<div class = "modal fade" id = "addstudent" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
    <partial name = "AddStudentPartial" model = "new RegistrationViewModel{
            
            Email = String.Empty,
            Password = String.Empty,
            ConfirmPassword = String.Empty,
            FirstName = String.Empty,
            LastName = String.Empty,
            AcceptUserAgreement = false
}" />
</div>

<div class = "modal fade" id = "editstudent" tabindex = "-1" role = "dialog" aria-labelledby = "exampleModalLabel" aria-hidden = "true">
   <partial name = "EditStudentPartial" model = "Model.EditUserViewModel" />

</div>

@section Scripts
{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}



